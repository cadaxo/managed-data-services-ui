<mvc:View controllerName="com.cadaxo.cmds.controller.App"
    xmlns:mvc="sap.ui.core.mvc" xmlns:core="sap.ui.core" xmlns="sap.m" xmlns:l="sap.ui.layout" xmlns:g="sap.suite.ui.commons.networkgraph">
	<Shell id="shell" appWidthLimited="false">
		<App id="app">
			<pages>
				<Page id="page" title="{i18n>title}">
					<content>
						<FlexBox fitContainer="true" renderType="Bare" wrap="Wrap" id="graphWrapper">
						
							<g:Graph enableWheelZoom="false"
								nodes="{graphModel>/nodes}"
								id="graph"
								lines="{graphModel>/links}"
								noDataText="{i18n>noData}"
								width="auto">
								<g:statuses>
									<g:Status key="TABL" title="Table" backgroundColor="blue" contentColor="darkblue"
										borderColor="blue" hoverBorderColor="sapUiContentShadowColor" />
									<g:Status key="DDLS" title="CDS View" backgroundColor="green" contentColor="darkgreen"
										borderColor="green" hoverBorderColor="sapUiContentShadowColor" />    
									<g:Status key="ASSOCIATION" title="Association" backgroundColor="green"
										borderColor="sapUiContentShadowColor" hoverBorderColor="sapUiContentShadowColor" /> 
									<g:Status key="BASE" title="Base" backgroundColor="blue"
										borderColor="sapUiContentShadowColor" hoverBorderColor="sapUiContentShadowColor" />  
									<g:Status key="ISUSED" title="Is Used" backgroundColor="red"
										borderColor="sapUiContentShadowColor" hoverBorderColor="sapUiContentShadowColor" />
									<g:Status key="DISABLED" title="Disabled" backgroundColor="white" contentColor="grey"
										borderColor="grey" hoverBorderColor="sapUiContentShadowColor" />	                       
								</g:statuses>
								<g:nodes>
									<g:Node key="{graphModel>DsId}" title="{graphModel>ObjectName}"
										icon="{
												path: 'graphModel>ObjectType',
												formatter: '.formatter.setNodeIcon'
										}"  
										showActionLinksButton="false"
										showDetailButton="false"
										showExpandButton="false"
										shape="Circle"
										width="300"
										status="{parts: [
											'graphModel>ObjectType', 'graphModel>ObjectState'
											],
											formatter: '.formatter.setNodeStatus'
										}"
										press="onNodePressed">
										<g:actionButtons>
											<g:ActionButton
													icon="sap-icon://navigation-left-arrow"
													title="Show parent nodes"
													position="Left"
													press="leftExpandPressed"/>
									
											<g:ActionButton
													icon="sap-icon://navigation-right-arrow"
													title="Show child nodes"
													press="rightExpandPressed"/>
										</g:actionButtons>
									</g:Node>

								</g:nodes>
								<g:lines>
								<g:Line 
									from="{graphModel>ObjectId1}" 
									to="{graphModel>ObjectId2}"
									press="linePressed"
									status="{graphModel>Type}" 
									title="{graphModel>Description}">
								</g:Line>
							</g:lines>
						
							</g:Graph>
							<Panel visible="false" width="35%" height="100%" id="sideBar-panel">
								<headerToolbar>
									<OverflowToolbar>
										<Title text="{ObjectName}"/>
										<ToolbarSpacer />
										<Button press="whereUsedPressed" id="btn-show-where-used" text="Show Where Used" enabled="false" />
										<Button press="viewInBrowserPressed" icon="sap-icon://detail-view" tooltip="Show source in browser">
											<customData>
												<core:CustomData key="url" value="{ActionLink/Display}"/>
											</customData>
										</Button>
										<Button press="viewInADTPressed" icon="sap-icon://edit-outside" tooltip="Show source in ADT">
											<customData>
												<core:CustomData key="url" value="{ActionLink/Edit}"/>
											</customData>										
										</Button>
									</OverflowToolbar>
								</headerToolbar>
								<content>
									<TabContainer id="tabs">
										<items>
											<TabContainerItem name="Fields">
												<content>
													<Tree itemPress="fieldPressed" id="tree-fields" items="{nodeDetail>/fields}"
													mode="SingleSelectMaster"
													>
														<CustomTreeItem type="Active">
															<customData>
																<core:CustomData key="fieldName" value="{nodeDetail>text}"/>
															</customData>
															<FlexBox alignItems="Start" width="100%">
																<items>
																	<Text text="{nodeDetail>text}">
																	<layoutData>
																		<FlexItemData growFactor="1" />
																	</layoutData>
																	</Text>
																	<Text text="{nodeDetail>value}" >
																	<layoutData>
																		<FlexItemData growFactor="1" />
																	</layoutData>
																	</Text>
																</items>
															</FlexBox>
														</CustomTreeItem>
													</Tree>
												</content>
											</TabContainerItem>
											<TabContainerItem name="Header">
												<content>
													<Tree id="tree-headers" items="{nodeDetail>/headerAnnotations}">
														<CustomTreeItem type="Active">
															<FlexBox width="100%" alignItems="Start" >
																<items>
																	<Text width="100%"  text="{nodeDetail>text}">
																	<layoutData>
																		<FlexItemData width="100%" growFactor="1" />
																	</layoutData>
																	</Text>
																	<Text width="100%" textAlign="End" text="{nodeDetail>value}" >
																	<layoutData>
																		<FlexItemData  growFactor="1" />
																	</layoutData>
																	</Text>
																</items>
															</FlexBox>
														</CustomTreeItem>
													</Tree>
												</content>
											</TabContainerItem>
											<TabContainerItem name="Parameters">
												<content>
													<Tree></Tree>
												</content>
											</TabContainerItem>
										</items>
									</TabContainer>
								</content>
						
							</Panel>
						</FlexBox>
          			</content>
				</Page>
			</pages>
		</App>
	</Shell>
</mvc:View>